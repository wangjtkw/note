# 计算机网络

## 一、计算机网络概述(上)

### 什么是Internet？

通信系统模型：

![通信系统模型](C:\Users\TKW\Desktop\note\计网_pic\通信系统模型.png)

信源：发生和产生信息的地方

信宿：信息要到达的地方

由发送设备将信息发送至信道上，由接收设备接收信息，再信道上可能受到噪声的干扰。

计算机网络就是互连的、自治的计算机集合。

自治：无主从关系

互连：互联互通（通信链路）

通过交换网络互连主机，交换节点为路由器或交换机

什么是Internet？

- 全球最大的互联网络，ISP（Internet Service Provider）网络互联的“网络之网络”；
- 数以百万计的互连的计算机设备集合：主机（hosts）=端系统（end systems）运行各种网络应用
- 通信链路：光纤，铜缆，无线电，卫星。。。。
- 分组交换：转发分组（数据包）：路由器（routers）和交换机（switches）

Internet为网络应用提供应用编程接口，以支持应用程序“连接”Internet，发送/接收数据。

### 什么是网络协议？

协议是计算机网络有序进行的重要保障。

硬件（主机，路由器，通信链路等）是计算机网络的基础。

计算机网络中的数据交换必须遵守事先约定好的规则。

网络协议（network protocol），简称为协议，是为进行网络中的数据交换而建立的规则、标准或约定。

协议规定了通信实体之间所交换的消息的格式、意义、顺序以及针对收到消息或发生的事件所采取的“动作”(actions)

协议的三要素：语法、语义、时序

- 语法(Syntax)：数据与控制信息的结构或格式，如果是底层信息，对应的就是信号电平
- 语义(Semantics)：语义规定在传输信息的过程中，协议双方需要发出何种控制信息，这些控制信息是什么含义，需要完成何种操作以及做出何种响应。以及进行差错控制。
- 时序(Timing)：时序定义了协议双方通信所要遵循的事件顺序以及双方交换信息的速度匹配问题。

协议规范了网络中所有信息发送和接收过程。

Internet协议标准：

- RFC: Request for Comments
- IETF: 互联网工程任务组(Internet Engineering Task Force)   

### 计算机网络的结构

网络边缘：主机、网络应用

接入网络、物理介质：有线或无线通信链路

网络核心（核心网络）：互联的路由器（或分组转发设备）

#### 网络边缘：

由主机或端系统构成，位于“网络边缘”，这些网络边缘都能运行网络应用程序，如Web，email等

这些主机上运行的网络应用的通信方式主要有两类：

- 客户/服务器（client/server）应用模型：客户端发送请求，服务器端接收请求并对客户端做出响应，该种模式谁发送请求，谁就是客户端，谁接收请求，谁就是服务器，该种模式下所有的通信都是在客户端与服务器之间进行，不会出现客户与客户之间通信的情况。
- 对等（peer-peer, P2P）应用模型：通信双方之间没有特定的客户端与服务器的身份区分，在该类模式下，可以没有（或不仅仅依赖）传统意义上的专有服务器，通信是在对等的实体之间直接进行的。

#### 接入网络：

接入网络就是将网络边缘的这些主机连接到核心网络上。

接入网络：住宅（家庭）接入网络、机构接入网络（学校、企业等）、移动接入网络

用户关心的：

- 带宽（bindwidth）：数据传输速率（每秒传输多少bit/bps），其他领域的带宽是指最高频率与最低频率之差（赫兹/Hz）
- 接入方式：共享还是独享

代表性的接入网络：数字用户线路（DSL），ADSL非对称数字用户线路，电缆网络：频分多路复用：在不同频带（载波）上传输不同的频道。HFC：混合光纤同轴电缆（hybrid fiber coax）。无线接入网络：通过共享的无线接入网络连接端系统和路由器，通过基站（base station）或称为“接入点”（access point）

#### 网络核心：

互联的路由器网络，网络核心的关键功能：路由+转发

路由（routing）：确定分组从源到目的传输路径，路由算法

转发（forwarding）：将分组从路由器的输入端口交换至正确的输出端口。

网络核心解决的基本问题是：

如何实现数据从源主机通过网络核心送达目的主机？利用数据交换，

数据交换类型：

- 电路交换：最典型的电路交换网络：电话网络

电路交换的三个阶段：建立连接（呼叫/电路建立）、通信、释放连接（拆除电路）

该种方式是资源独占的。

为了使得电路交换网络共享中继线，采用了多路复用技术（Multiplexing）

- 报文交换：

- 分组交换：

### Internet的结构：

端系统通过ISP（access ISPs）连接到Internet。

接入ISP必须进一步互连，这样任意两个主机才可以互相发送分组。

构成复杂的网络互连的网络

### 多路复用技术：

多路复用（multiplexing），简称复用，是通信技术中的基本概念。

多路复用是通过将链路/网络资源（如带宽）划分为“资源片”，然后将资源片分配给路由器完成各路的“呼叫”（calls），每路呼叫就独占分配到的资源片进行通信，而这些资源片就可能被闲置（idle），（无共享）。

典型的多路复用方法：

- 频分多路复用技术（frequency division multiplexing-FDM）：就是将信道资源在频率上进行划分分成了多个频带的子信道，让每路信号只使用某个频带的子信道，因为频率相互之间是隔离开的，典型代表是电视网络。

  频分多路复用的各用户占用不同的带宽资源（请注意，这里的“带宽”是频带宽度（单位：Hz）而不是数据的发送速率）

  用户在分配到一定的频带后，在通信过程中自始至终都占用这个频带。

- 时分多路复用技术（time division multiplexing-TDM）：将时间划分为一段段等长的时分复用帧（TDM帧），每个用户在每个TDM帧中占用固定序号的时隙。

  每个用户所占用的时隙是周期性出现的（其周期就是TDM帧的长度）

  时分复用的所有用户是在不同的时间占用相同的频带宽度。

- 波分多路复用技术（wavelength division multiplexing-WDM）：

  波分复用就是光的频分复用

- 码分多路复用技术（code division multiplexing-CDM）：

  广泛应用于无线链路共享（如蜂窝网是，卫星通信等）

  每个用户分配一个唯一的m bit码片序列（chipping sequence），其中“0”用“-1”表示，“1”用“+1”表示。

  各用户使用相同频率载波，利用各自码片序列编码数据。编码公式为：

  编码信号=（原始数据）X（码片序列）；

  如发送比特（+1），则发送自己的m bit码片序列。

  如发送比特（-1），则发送该码片序列的m bit码片序列的驸反码。

  各用户码片序列相互正交（orthogonal）

### 报文交换(message switching)与分组交换(package switching)：

报文：源（应用）发送信息整体，比如：一个文件，一个图像等

分组：在报文拆出来的一系列相对较小的数据包，分组交换需要报文的拆分与重组。进行报文的拆分与重组需要产生额外的开销，另外还需要在拆分出的报文前加上额外的数据。

分组交换：统计多路复用(statistical multiplexing)。分组交换的分组序列是不确定的，按需共享链路。

报文交换与分组交换均采用存储-转发交换方式。

区别：报文交换以完整报文进行“存储-转发”；分组交换以较小的分组进行“存储-转发”。

分组交换适用于突发数据传输网络，即数据发送具有突发性，

分组交换的优点：这样可以使资源充分共享；简单、无需呼叫建立连接

分组交换的不足：由于大量用户大量发送数据，而可能产生拥塞(congestion):使得分组延迟或丢失，为解决这个问题，需要协议处理可靠数据传输和进行拥塞控制。

## 二、计算机网络概述(下)

### 计算机网络性能

#### 速率：

速率即数据率(data rate)或称为数据传输速率或比特率(bit rate)。单位时间（秒）传输信息（比特）量

计算机网络中最重要的一个性能指标。

单位：b/s(或bps)、kb/s、Mb/s、Gb/s;

k = 10^3、M = 10^6、G = 10^9

速率往往是指额定速率或标称速率

#### 带宽(bandwidth)：

原本指信号具有的频带宽度，即最高频率与最低频率之差，单位是赫兹(Hz)。

网络中的带宽通常是数字信道所能传送对的“最高数据率”，单位：b/s(bps)；

常用的单位有：kb/s(10^3 b/s)、Mb/s(10^6 b/s)、Gb/s(10^9 b/s)、Tb/s(10^12 b/s)

#### 延迟/时延(delay或latency)：

分组交换产生延迟以及发生丢包的原因：分组在路由器缓存中排队，分组到达速率超出输入链路容量时，就会发生丢包。

分组延迟分类：

- 节点处理时延(nodal processing delay)：进行差错检测、确定输出链路等。时间很短，一般小于毫秒级
- 排队时延(queueing delay)：当链路正在传输其他分组的时候，等待输出链路可用，该时间长短取决于路由器的拥塞程度，一般很难确定。
- 传输延迟(transmission delay)或记为发送延迟：取决于分组长度(bits)，以及链路带宽(bps)。
- 传播延迟(propagation delay)：与物理链路长度，以及信号传播速率(~2*10^8 m/sec)有关

排队延迟：

R：链路带宽(bps)

L：分组长度(bits)

a：平均分组到达速率

流量强度(traffic intensity) = La/R

La/R ~ 0：平均排队延迟小

La/R -> 1：平均排队延迟大

La/R > 1：超出服务能力，平均排队延迟无限大

#### 时延带宽积：

时延带宽积 = 传播时延 X 带宽  结果为数据量

链路的时延带宽积又称为以比特为单位的链路长度。

分组丢失(丢包)：

产生原因：队列缓存的容量有限，反正到达已满队列就会被丢弃(即丢包)，被丢弃的分组可能由前序节点或源重发(也可能不重发)

丢包率 = 丢包数 / 已发分组总数

#### 吞吐量/率(Throughput)：

吞吐量：表示在发送端与接收端之间传送数据速率(b/s)

吞吐量的两种指标：

- 即时吞吐量：给定时刻的速率
- 平均吞吐量：一段时间的平均速率

吞吐量取决于瓶颈链路(bottleneck link)：端到端路径上，限制端到端吞吐量的链路。

### 计算机网络体系结构：

网络体系结构是从功能上描述计算机网络结构。

计算机网络体系结构简称网络体系结构(network architecture)是分层结构。

计算机网络体系结构是计算机网络的各层及其协议的集合。

体系结构是一个计算机网络的功能层次及其关系的定义，体系结构是抽象的，而并不关心其内部具体是怎么实现的。

分层结构的优点：

- 分层结构结构清晰，有利于识别复杂系统的部件及其关系，分层的参考模型(reference model)

- 模块化的分层易于系统更新、维护。任何一层服务实现的改变对于系统其他层都是透明的。
- 有利于标准化。

分层结构的不足：当分层过多时，会导致效率低下。

计算机网络体系结构中的概念：

- 实体(entity) 表示任何可发送或接收信息的硬件或软件进程。
- 协议是控制两个对等实体进行通信的规则的集合，协议是“水平的”。
- 任一层实体需要使用下层服务，遵循本层协议，实现本层功能，向上层提供服务，服务是“垂直的”。
- 下层协议的实现对上层的服务用户是透明的。
- 同系统的相邻层实体之间通过接口进行交互，通过服务访问点SAP(Service Access Point)，交换原语，指定请求的特定服务。

#### OSI参考模型：

为什么需要数据封装？

因为为了增加控制信息，构造协议数据单元(PDU)，控制信息主要包括：

- 地址(Address)：标识发送端/接收端，
- 差错检测编码(Error-detecting code)：用于差错检测或纠正
- 协议控制(Protocol control)：实现协议功能的附加信息，如：优先级(priority)、服务质量(QoS)和安全控制等。

##### 物理层功能：

解决了单一比特传输问题

- 接口特性：机械特性、电气特性、功能特性、规程特性。
- 比特编码：
- 数据率：
- 比特同步：时钟同步
- 传输模式：单工(simplex)、半双工(half-duplex)、全双工(full-duplex)

##### 数据链路层功能：

解决了当一个比特出现错误时，怎么来纠正它的问题。

负责结点-结点(node-to-node)数据传输

组帧(Framing)

物理寻址(Physical addressing)：在帧头中增加发送端/或接收端的物理地址标识数据帧的发送端和/或接收端

- 流量控制(Flow control)：匹配发送端和接收端的发送/接收速度，避免接收端接收速度太慢，发送端发送速度太快，造成丢包。

- 差错控制(Error control)：检测并重传损坏或丢失帧，并避免重复帧
- 访问(接入)控制(Access control)：在任一给定时刻决定哪个设备拥有链路(物理介质)控制使用权。

##### 网络层功能：

网络层负责从源主机到目的主机数据分组(packet)交付，从源主机到目的主机可能穿过多个网络

为了保证一定能从源主机到目的主机，就需要一个网络层的逻辑寻址(Logical addressing)，保证这是一个全局唯一的逻辑地址，确保数据分组被送达目的主机，如IP地址。

还需要解决路由(Routing)的问题

- 路由器(或网关)互连网络，并路由分组至最终目的主机。
- 路径选择
- 分组转发

##### 传输层功能：

传输层负责源-目的(端-端)  (进程间)完整报文传输

传输层完成：

- 报文的分段与重组
- SAP寻址：确保将完整报文提交给正确进程，如端口号
- 进行端到端的连接控制
- 解决端到端的流量控制
- 从端的角度进行差错控制

##### 会话层功能：

进行对话控制(dialog controlling)：

- 对会话进行建立和维护
- 对会话进行同步(synchronization)：在数据流中插入"同步点"
- 会话层是端到端中最"薄"的一层，在实际网络中，这一层是不存在的，或者说是不单独存在

##### 表示层功能：

表示层是为了：

- 处理两个系统间交换信息的语法与语义(syntax and semantics)问题
- 两者交换的信息的数据表示转化：在发送数据一段将数据转化为主机独立的编码，到了目的主机后，再将独立编码转为主机相关编码
- 对应用数据进行加密/解密
- 进行压缩/解压缩
- 该层在实际网络中也是不独立存在的，由应用层实现

##### 应用层功能：

应用层数据为用户提供网络接口：

应用层数据：

- 支持用户通过用户代理(如浏览器)或网络接口使用网络(服务)
- 典型的应用层服务：文件传输(FTP)、电子邮件(SMTP)、Web(HTTP)......

#### TCP/IP参考模型：

TCP/IP模型具有：应用层、运输层、网际层和网络接口层

该模型没有对网络接口层进行详细规定，只需要能封装IP数据帧就可

在该模型中，IP可应用到各式各样的网络上

#### 五层参考模型：

综合了OSI模型和TCP/IP模型的优点：

分为：

- 应用层：支持各自网络应用：FTP、SMTP、HTTP
- 传输层：进程-进程的数据传输：TCP、UDP
- 网络层：源主机到目的主机的数据分组路由与转发：IP协议、路由协议等
- 链路层：相邻网络元素(主机、交换机、路由器等)的数据传输：以太网(Ethernet)、802.11(WIFI)、PPP
- 物理层：比特传输

## 三、应用层

网络应用体系结构：

- 客户机/服务器
- P2P
- 混合结构

网络应用的服务需求

- 可靠性
- 带宽
- 时延

Internet传输层服务模型

- TCP
- UDP

特定网络应用及协议

- HTTP
- SMTP、POP、IMAP
- DNS
- P2P应用

Socket编程

- TCP
- UDP

### 网络应用的体系结构：

#### 客户机/服务器结构(Client-Server，C/S)：

服务器：

- 7*24小时提供服务

- 永久性访问地址/域名
- 利用大量服务器实现可扩展性

客户机：

- 与服务器通信，使用服务器提供的服务
- 间歇性接入网络
- 可能使用动态IP地址
- 不会与其他客户机直接通信

#### 点对点结构(Pear-to-pear，P2P)：

结构特点：

- 没有永远在线的服务器
- 任意端系统/节点之间可以直接通讯
- 节点间歇性接入网络
- 节点可能改变IP地址

优缺点：

- 优点：高度可伸缩
- 缺点：难于管理

#### 混合结构(Hybrid)：

Napster：

- 文件传输使用P2P结构
- 文件的搜索采用C/S结构——集中式
  - 每个节点向中央服务器登记自己的内容
  - 每个节点向中央服务器提交查询请求，查找感兴趣的内容

#### 网络应用进程间通信：

进程：主机上运行的程序

同一主机上运行的进程间通信方式：

- 进程间通信机制
- 操作系统提供

不同主机上运行的进程通信方式：（客户机进程：发起通信的进程。服务器进程：等待通信请求的进程）

- 消息交换/报文交换

套接字：Socket

进程间通信利用socket发送/接收消息实现

传输基础设施向进程提供API：传输协议选择，参数配置

如何寻址进程：

- 不同主机上的进程间通信，每个进程都必须拥有标识符
- 依靠IP地址来寻址主机，
- 依靠端口号/port number来区分进程
  - 为主机每个需要通信的进程分配一个端口号
  - Http Server：80
  - Mail Server：25
- IP地址 + 端口号来进行进程标识

#### 应用层协议：

网络应用应需遵信应用层协议

公开协议：

- 由RFC(Request For Comments)定义，
- 运行互操作

网络应用对传输服务的需求：

- 数据丢失(data loss)/可靠性(reliability)
  - 某些网络应用能够容忍一定的数据丢失：电话网络
  - 某些网络应用要求100%可靠的数据传输：文件传输，telnet

- 时间(timing)/延迟(delay)
  - 有些应用只有在延迟足够低时才“有效”
  - 网络电话/网络游戏
- 带宽(bandwidth)
  - 某些应用只有在带宽达到最低要求时才“有效”：网络视频
  - 某些应用能够适应任何带块——弹性应用：email

#### Internet提供的传输服务：

- TCP服务：
  - 面向连接：客户机/服务器进程间需要建立连接
  - 可靠传输
  - 流量控制：发送方不会发送速度过快，超过接收方的处理能力
  - 拥塞控制：当网络负载过重时能够限制发送方的发送速度
  - 不提供时间/延迟保障
  - 不提供最小带宽保

- UDP服务：
  - 无连接
  - 不可靠的数据传输
  - 不提供：
    - 可靠性保障
    - 流量控制
    - 拥塞控制
    - 延迟保障
    - 带宽保障

### Web应用：

#### Http协议：

- 超文本传输协议(HyperText Transfer Protocol)：
- C/S结构：
  - 客户——Browser：请求、接收、展示Web对象
  - 服务器——Web Server：响应客户的请求，发送对象

- 使用TCP传输服务
  - 服务器在80端口等待客户的请求
  - 浏览器发起到服务器的TCP连接(创建套接字Socket)
  - 服务器接受来自浏览器的TCP连接
  - 浏览器(HTTP客户端)与Web服务器(HTTP服务器)交换信息
  - 关闭TCP连接
- 无状态(stateless)：服务器不维护任何有关客户端过去所有请求的信息，因为有状态的协议更加复杂，有状态的协议需要维护状态(历史信息)，如果客户或服务器失效，会产生状态的不一致，解决这种不一致代价太高

#### HTTP连接的两种类型：

- 非持久性连接(Nonpersistent HTTP)：

  - 每个TCP连接最多允许传输一个对象
  - HTTP 1.0版本使用非持久性连接

  RTT(Round Trip Time)：从客户端发送一个很小的数据包到服务器并返回所经历的时间

  响应时间(Response Time)：

  - 发起、建立TCP连接：1个RTT
  - 发送HTTP请求消息到HTTP响应消息的前几个字节到达：1个RTT
  - 响应消息中所包含的文件/对象传输时间

- 持久性连接(Persistent HTTP)

  - 每个TCP连接允许传输多个对象
  - HTTP 1.1版本默认使用持久化连接

  发送响应后，服务器保持TCP连接的打开

  后续的HTTP消息可以通过这个连接发送

  两种持久性连接：

  - 无流水(pipelining)的持久化连接
    - 客户端只有收到前一个响应后才发送新的请求
    - 每个被引用对象耗时1个RTT
  - 带有流水机制的持久性连接：
    - HTTP 1.1的默认选项
    - 客户端只要遇到一个引用对象就尽快发出请求
    - 理想情况下，收到所有的引用对象只要耗时约1个RTT

#### HTTP消息格式：

两类消息：

- 请求消息(request)：

  - 使用ASCII：人直接可读
  - ![http-request](C:\Users\TKW\Desktop\note\计网_pic\http-request.jpg)
  - 上传输入的方法：
    - post方法：
      - 网页经常需要填写表格(form)
      - 在请求消息的消息体(entity body)中上传客户端的输入
    - URL方法
      - 使用GET方法
      - 输入信息通过request行的URL字段上传

  HTTP 1.0的请求方法：

  - GET
  - POST
  - HEAD：请Server不要将所请求的对象放入响应消息中(作测试用)

  HTTP 1.1的请求方法：

  - GET、POST、HEAD
  - PUT：将消息体中的文件上传到URL字段所指定的路径
  - DELETE：删除URL字段所指定的文件

- 响应消息(response)：

  - ![http-response](C:\Users\TKW\Desktop\note\计网_pic\http-response.jpg)
  - HTTP响应状态行：
    - 位于响应消息的第一行
    - 200 OK
    - 301 网页被永久性挪走
    - 400 
    - 404 找不到资源
    - 505 HTTP版本不支持

#### Cookie技术：

Cookie技术是某些网站为了辨别用户身份、进行session跟踪而储存在用户本地终端上的数据(通常经过加密)。

Cookie的组件：

- HTTP请求消息的cookie头部行
- HTTP响应消息的cookie头部行
- 保存在客户端主机上的cookie文件，由浏览器管理
- Web服务器端的后台数据库

![http-cookie](C:\Users\TKW\Desktop\note\计网_pic\http-cookie.jpg)

Cookie可用于：

- 身份验证
- 购物车
- 推荐
- Web e-mail
- ......

#### Web缓存/代理服务器技术：

功能：在不访问服务器的前提下满足客户端的HTTP请求

发明这项技术的原因：

- 缩短客户请求的响应时间
- 减少机构/组织的流量
- 在大范围内(Internet)实现有效的内容分发

条件性GET方法：

如果换成有最新的版本，则不需要发送请求对象

缓存：在HTTP请求消息中声明所持有版本的日期：If-modified-since:<date>

服务器：如果缓存对象的版本是最新的，则响应消息中不包含对象，HTTP/1.0 304 Not Modified

#### CDN(内容分发网络，未完成)：

### Email应用构成：

Email应用构成：

- 邮件客户端(user agent)：
  - 读、写Email消息
  - 与服务器交互，收、发Email消息
  - Outlook，Foxmail，Thunderbird
  - Web客户端
- 邮件服务器(Mail Server)：
  - 为每一个用户分配一个邮箱：存储发给该用户的Email
  - 消息队列(message queue)：存储等待发送的Email
- SMTP协议(Simple Mail Transfer Protocol)：
  - 邮件服务器之间传递消息所使用的协议
  - 客户端：发送消息的服务器
  - 服务器：接收消息的服务器
  - 使用TCP进行email消息的可靠传输
  - 端口25
  - 传输过程的三个阶段：握手、消息的传输、关闭
  - 命令/响应交互模式
    - 命令(command)：ASCII文本
    - 响应(response)：状态代码和语句
  - 初始的Email消息只能含有7位ASCII码
  - SMTP协议的特点：
    - 使用持久性连接
    - 要求消息必须由7位ASCII码构成
    - SMTP服务器利用CRLF.CRLF确定消息的   结束

![SMTP](C:\Users\TKW\Desktop\note\计网_pic\SMTP.jpg)

#### Email消息格式：

- SMTP：email消息的传输/交换协议

- RFC 822：文本消息格式标准

  - 头部行(header)
    - To
    - From
    - Subject
  - 消息体(body)
    - 消息本身
    - 只能是ASCII字符

  Email消息格式：多媒体扩展

  - MIME：多媒体邮件扩展 RFC

    通过在邮件头部增加额外的行以声明MIME的内容类型

POP协议：

- 认证过程：

  - 客户端命令：
    - User：声明用户名
    - Pass：声明密码
  - 服务器响应：
    - +OK
    - -ERR
- 事务阶段：

  - List：列出消息数量
  - Retr：用编号获取消息
  - Dele：删除消息
  - Quit：退出
- POP协议模式：

  - 下载并删除模式：用户如果换了客户端软件，无法重读该邮件
  - 下载并保持模式：不同客户端都可以保留消息的拷贝
  - POP3协议是无状态的
- IMAP协议：
- 所有消息同一保持在一个地方：服务器
  - 允许用户利用文件夹组织消息
- IMAP支持跨会话(Session)的用户状态：
  
  - 文件夹的名字
    - 文件夹与消息ID之间的映射等

### DNS概述：

DNS(Domain Name System)：

- 解决Internet上主机/路由器的识别问题：
  - IP地址
  - 域名：

域名解析系统DNS：

- 多层命名服务器构成分布式数据库
- 应用层协议：完成名字的解析
  - Internet核心功能，用应用层协议实现
  - 网络边界复杂

DNS服务：

- 域名向IP地址的翻译
- 主机别名
- 邮件服务器别名
- 负载均衡：Web服务器

不使用集中式DNS的原因：

- 会产生单点失败的问题：
- 流量问题：
- 距离问题：
- 维护性问题：

DNS根域名服务器：

- 本地域名解析服务器无法解析域名时，访问根域名服务器
- 根域名服务器
  - 如果不知道映射，访问权威域名服务器
  - 获得映射
  - 向本地域名服务器返回映射

TLD和权威域名解析服务器：

- 顶级域名服务器(TLD，top-level domin)：负责com，org，net，edu等顶级域名和国家顶级域名，例如cn，uk，fr等

- Network Solutions 维护com顶级域名服务器
- Educause 维护 edu顶级域名服务器

权威域名服务器：

- 权威(Authoritative)域名服务器：组织的域名解析服务器，提供组织内部服务器的解析服务
- 组织负责维护
- 服务器提供商负责维护

本地域名解析服务器：

- 不严格属于层级体系
- 每个ISP有一个本地域名服务器：默认域名解析服务器
- 当主机进行DNS查询时，查询被发送到本地域名服务器：作为代理(proxy)，将查询转发给(层级式)域名解析服务器系统

DNS记录缓存和更新：

只要域名解析服务器获得域名——IP映射，即缓存这一映射

- 一段时间过后，缓存条目失效(删除)
- 本地域名服务器一般会缓存顶级域名服务器的映射，因此根域名服务器不经常被访问

DNS记录和消息格式：

- 资源记录(RR，resource records)
- Type = A：
  - Name：主机域名 
  - Value：IP地址
- Type = NS：
  - Nmae：域(edu.cn)
  - Value：该域权威域名解析服务器的主机域名
- Type = CNAME：
  - Name：某一真实域名的级别 
  - Value：真实域名
- Type = MX：
  - Value是与name相对应的邮件服务器

DNS协议：

- 查询(query)和回复(reply消息)
- 消息格式相同
- 消息头部
  - Identification：16位查询编号，回复使用相同的编号
  - flags：
    - 查询或回复
    - 期望递归
    - 递归可用
    - 权威回答

![DNS](C:\Users\TKW\Desktop\note\计网_pic\DNS.jpg)























